(function(a){a.fn.jSexdice=function(u){function n(v,g,e){var c=a("#dick_"+w);"top"==e&&4>b||4==b&&"bottom"==e?a(c).animate({top:v+k+"px"},j):"bottom"==e&&4>b||4==b&&"top"==e?a(c).animate({top:v-k+"px"},j):"left"==e&&4>b||4==b&&"right"==e?a(c).animate({left:g+k+"px"},j):("right"==e&&4>b||4==b&&"left"==e)&&a(c).animate({left:g-k+"px"},j)}function x(){if(3<=r){r=0;b+=1;k+=20;j-=80;if(4==b)j=50;else if(5==b){s();a.ajax({data:"q=setSession&girl="+p+"&level="+b,success:f.onSuccess,error:f.onError});return}a("#bkg").show();
setTimeout(function(){s()},1E3)}}function s(){m=0;1==b?a("#level").html("\u0423\u0440\u043e\u0432\u0435\u043d\u044c: \u043f\u0435\u0440\u0432\u044b\u0439"):2==b?a("#level").html('\u0423\u0440\u043e\u0432\u0435\u043d\u044c: <span style="color:#42529C">\u0432\u0442\u043e\u0440\u043e\u0439</span>'):3==b?a("#level").html('\u0423\u0440\u043e\u0432\u0435\u043d\u044c: <span style="color:green">\u0442\u0440\u0435\u0442\u0438\u0439</span>'):4==b?a("#level").html('\u0423\u0440\u043e\u0432\u0435\u043d\u044c: <span style="color:#F30">\u0447\u0435\u0442\u0432\u0451\u0440\u0442\u044b\u0439</span>'):
5==b&&(a("#level").html('<span style="color:#F30">\u041a\u043e\u043d\u0435\u0446 \u0438\u0433\u0440\u044b :)</span>'),(t<l||0==l)&&a.ajax({data:"q=setTime&besttime="+t,success:function(b){l=b;q(l,a("#best-time"),!0)},error:f.onError}));a("#bkg").hide();5>b&&(d.find(".dick").show(),d.find(".dick").css("width","100px").css("height","100px").css("border-radius","10%").css("font-size","80px").css("top","45%"),d.find("#dick_0").css("left","33%"),d.find("#dick_1").css("left","43%"),d.find("#dick_2").css("left",
"53%"));a.ajax({data:"q=setSession&girl="+p+"&level="+b,success:f.onSuccess,error:f.onError})}function q(a,g,e){var c=a,d=parseInt(c/3600);1>d&&(d=0);c=parseInt(c-3600*d);10>d&&(d="0"+d);var h=parseInt(c/60);1>h&&(h=0);c=parseInt(c-60*h);10>h&&(h="0"+h);10>c&&(c="0"+c);g.html(d+":"+h+":"+c);t=a;5>b&&!e&&(a++,setTimeout(function(){q(a,g,e)},1E3))}u=a.extend({},u);var d=a(this),p=Math.floor(6*Math.random()),k=100,j=300,b=1,w=-1,m=0,r=0,l=0,t=0;a.ajaxSetup({url:"/svc/SexDice",type:"get",dataType:"html",
timeout:7E3,cache:!1});a.ajax({data:"q=setSession&girl="+p+"&level="+b,success:f.onSuccess,error:f.onError});q(0,a("#real-time"),!1);a.ajax({data:"q=getTime",success:function(b){l=b;q(l,a("#best-time"),!0)},error:f.onError});a("html").mouseover(function(){x()});a(window).resize(function(){location.reload()});d.find(".dick").mouseover(function(b){w=d.find(".dick").index(this);var g=0,e=0,c=0,f=Math.floor(a(this).offset().top),h=Math.floor(a(this).offset().left),g=Math.floor(b.pageX-h),e=Math.floor(b.pageY-
f),c=a(this).width();a(this).height();g<c&&0<=e&&20>e?n(f,0,"top"):g<c&&e<c+3&&e>c-20?n(f,0,"bottom"):e<c&&0<=g&&20>g?n(0,h,"left"):e<c&&(g<=c+2&&g>c-20)&&n(0,h,"right")});d.find(".dick").click(function(){a(this).animate({width:"1px",height:"1px",fontSize:"0.1em",BorderRadius:"50%",opacity:"hide"},80);r++;x()});d.find("#anew").click(function(d){p=Math.floor(6*Math.random());a("#res").html();a("#bkg").show();setTimeout(function(){s()},1E3);b=1;d.preventDefault()});d.find("#kartinka_vid").click(function(a){d.find("#kartinka").slideToggle("normal");
a.preventDefault()});a("html").click(function(){m++;130==m&&a("#level").html('<span style="color:#F30">\u041d\u0435\u0440\u0432\u0438\u0448\u043a\u0438 \u0435\u0449\u0435 \u043d\u0435 \u0441\u0434\u0430\u044e\u0442?:D</span>');210==m&&a("#level").html('<span style="color:green">\u0421\u0434\u0435\u043b\u0430\u0439 \u0433\u043b\u0443\u0431\u043e\u043a\u0438\u0439 \u0432\u0434\u043e\u0445)</span>');310==m&&a("#level").html('<span style="color:#42529C">\u041c\u043e\u043b\u043e\u0434\u0446\u043e\u043c)</span>')})};
var f={onSuccess:function(){var f=Math.floor(99999999*Math.random());a("body").css("background","url(/svc/SexDice?q=photo&r="+f+") right 10px no-repeat")},onError:function(){}}})($);